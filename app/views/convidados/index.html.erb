<div class="container" id="convidados-container">
<ol class="breadcrumb">
    <li><%= link_to @fiesta.nombre, @fiesta %> / Convidados </li>
  </ol>

<div class="col-md-12">
  <div class="panel panel-default">
    <div class="panel-heading">
      Usuarios convidados a la fiesta
    </div>
    <div class="panel-body">
      <table class="table table-striped">
        <thead>
          <tr>
            <th>Nombre</th>
            <th>Correo</th>
            <% if policy(@convidado).destroy? %>
            <th>Eliminar</th>
            <% end %>
          </tr>
        </thead>
        <tbody>
          <% @convidados.each do |convidado| %>
          <tr>
            <% unless convidado.invitado_id.nil? %>
            <td><%= User.find(convidado.invitado_id).name %></td>
            <% else %>
            <td>No registrado aún</td>
            <% end %>
            <td><%= convidado.email %></td>
            <% if policy(@convidado).destroy? %>
            <td><%= link_to "Cancelar invitación", [@fiesta, convidado], method: :delete %></td>
            <% end %>
          </tr>
          <% end %>
        </tbody>
      </table>
      <% if policy(@convidado).create? %>
      <h3 class="extra-margin-top">Invitar usuarios</h3>
      <%= form_for [@fiesta, @convidado] do |f| %>
      <%= f.label :email, placeholder: "email" %>
      <%= f.email_field :email %>
      <%= f.submit 'Invitar amigos' , class: "btn-primary"%>
      <% end %>
      <% end %>
    </div>
  </div>
</div>
</div>
